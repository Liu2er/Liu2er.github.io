
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>Liu2er的技术博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Liu2er">
    

    
    <meta property="og:type" content="website">
<meta property="og:title" content="Liu2er的技术博客">
<meta property="og:url" content="http://liu2er.com/index.html">
<meta property="og:site_name" content="Liu2er的技术博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Liu2er的技术博客">

    
    <link rel="alternative" href="/atom.xml" title="Liu2er的技术博客" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Liu2er的技术博客">Liu2er的技术博客</a></h1>
				<h2 class="blog-motto">世界那么大，我早晚要去看</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:liu2er.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/09/21/2016_09_21_DataPersistence/" title="数据化持久技术" itemprop="url">数据化持久技术</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2016-09-21T07:28:16.000Z" itemprop="datePublished"> Published 2016-09-21</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="NSUserDefaults"><a href="#NSUserDefaults" class="headerlink" title="NSUserDefaults"></a>NSUserDefaults</h2><p>NSUserDefaults 的生命周期是全局的，使用要慎重。</p>
<h3 id="将-NSUserDefaults-的某一项置空"><a href="#将-NSUserDefaults-的某一项置空" class="headerlink" title="将 NSUserDefaults 的某一项置空"></a>将 NSUserDefaults 的某一项置空</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSUserDefaults</span> *defaults = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</div><div class="line">[defaults removeObjectForKey:key];</div></pre></td></tr></table></figure>
<h3 id="一次清空-NSUserDefaults-所有内容"><a href="#一次清空-NSUserDefaults-所有内容" class="headerlink" title="一次清空 NSUserDefaults 所有内容"></a>一次清空 NSUserDefaults 所有内容</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSString</span> *appDomain = [[<span class="built_in">NSBundle</span> mainBundle]bundleIdentifier];</div><div class="line">[[<span class="built_in">NSUserDefaults</span> standardUserDefaults]removePersistentDomainForName:appDomain];</div></pre></td></tr></table></figure>
<p>或用遍历的方式一项一项的清空：<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSUserDefaults</span>* defaults = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</div><div class="line"><span class="built_in">NSDictionary</span>* dict = [defaults dictionaryRepresentation]; </div><div class="line"><span class="keyword">for</span>(<span class="keyword">id</span> key <span class="keyword">in</span> dict) &#123;</div><div class="line">    [defaults removeObjectForKey:key];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="判断-NSUserDefaults-的某一项是否存在"><a href="#判断-NSUserDefaults-的某一项是否存在" class="headerlink" title="判断 NSUserDefaults 的某一项是否存在"></a>判断 NSUserDefaults 的某一项是否存在</h3><p>判断某个key是否存在，可以取出这个key的value，然后判断这个value是否有值，如果是数组，判断数组的count，如果是字符串判断length；</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS/">iOS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/NSUserDefaults/">NSUserDefaults</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/09/21/2016_09_21_DataPersistence/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/09/21/2016_09_21_DataPersistence/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/09/18/2016_09_18_UIButton/" title="UIButton 笔记" itemprop="url">UIButton 笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2016-09-18T02:46:13.000Z" itemprop="datePublished"> Published 2016-09-18</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="UIEdgeInsets属性"><a href="#UIEdgeInsets属性" class="headerlink" title="UIEdgeInsets属性"></a>UIEdgeInsets属性</h2><h3 id="UIEdgeInsets"><a href="#UIEdgeInsets" class="headerlink" title="UIEdgeInsets"></a>UIEdgeInsets</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="built_in">UIEdgeInsets</span> &#123;</div><div class="line">    <span class="built_in">CGFloat</span> top, left, bottom, right;  <span class="comment">// specify amount to inset (positive) for each of the edges. values can be negative to 'outset'</span></div><div class="line">&#125; <span class="built_in">UIEdgeInsets</span>;</div></pre></td></tr></table></figure>
<p>UIButton的UIEdgeInsets相关属性有三个：</p>
<ol>
<li>contentEdgeInsets</li>
<li>imageEdgeInsets</li>
<li>titleEdgeInsets</li>
</ol>
<p>image 的 UIEdgeInsets 属性的top、left、bottom 都是相对于 button 的，right 是相对于 title；<br>title 的 UIEdgeInsets 属性的top、bottom、right 都是相对于 button 的，left 是相对于 image；</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//拿到title和image的大小：</span></div><div class="line"><span class="built_in">CGSize</span> titleSize = <span class="keyword">self</span>.pureButton.titleLabel.bounds.size;</div><div class="line"><span class="built_in">CGSize</span> imageSize = <span class="keyword">self</span>.pureButton.imageView.bounds.size;</div><div class="line"><span class="comment">//分别设置偏移量:记住偏移量是位移</span></div><div class="line"><span class="keyword">self</span>.pureButton.titleEdgeInsets = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">0</span>, -imageSize.width, <span class="number">0</span>, imageSize.width);</div><div class="line"><span class="keyword">self</span>.pureButton.imageEdgeInsets = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">0</span>, titleSize.width, <span class="number">0</span>, -titleSize.width);</div></pre></td></tr></table></figure>
<p>举例：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#define layoutCoefficient ([UIScreen mainScreen].bounds.size.width == 414 ? 1 : ([UIScreen mainScreen].bounds.size.width == 375 ? 0.91 : 0.77))</span></div><div class="line"></div><div class="line"><span class="built_in">CGFloat</span> offset = <span class="number">5.</span>;</div><div class="line">[<span class="keyword">self</span>.subscribeButton setImage:[[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"subscribe_gray"</span>]scaledToSize:<span class="built_in">CGSizeMake</span>(<span class="number">15</span> * layoutCoefficient, <span class="number">15</span> * layoutCoefficient)] forState:<span class="built_in">UIControlStateNormal</span>];</div><div class="line">[<span class="keyword">self</span>.subscribeButton setTitle:<span class="string">@"订阅"</span> forState:<span class="built_in">UIControlStateNormal</span>];</div><div class="line">[<span class="keyword">self</span>.subscribeButton.titleLabel setFont:[<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">18</span> * layoutCoefficient]];</div><div class="line">[<span class="keyword">self</span>.subscribeButton setTitleColor:[<span class="built_in">UIColor</span> whiteColor] forState:<span class="built_in">UIControlStateNormal</span>];</div><div class="line"><span class="keyword">self</span>.subscribeButton.contentEdgeInsets = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span> + offset);</div><div class="line"><span class="keyword">self</span>.subscribeButton.titleEdgeInsets = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">0</span>, offset, <span class="number">0</span>, -offset);</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS/">iOS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/UIButton/">UIButton</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/09/18/2016_09_18_UIButton/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/09/18/2016_09_18_UIButton/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/09/08/2016_09_08_iOSPush/" title="iOS Push" itemprop="url">iOS Push</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2016-09-08T08:29:04.000Z" itemprop="datePublished"> Published 2016-09-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><p><a href="http://mrpeak.cn/ios/2016/01/06/push" target="_blank" rel="external">iOS Push 门道</a></p>
</li>
<li><p><a href="https://leancloud.cn/docs/ios_push_cert.html" target="_blank" rel="external">iOS 推送证书设置指南</a></p>
</li>
<li><p><a href="http://superdanny.link/2016/02/02/iOS-Apple-Push-Notification-Service/" target="_blank" rel="external">iOS推送的那些事</a></p>
</li>
<li><p><a href="http://blog.csdn.net/showhilllee/article/details/8631734" target="_blank" rel="external">一步一步教你做 iOS 推送</a></p>
</li>
<li><p><a href="http://tanqisen.github.io/blog/2013/02/27/ios-push-apns/" target="_blank" rel="external">一步一步实现 iOS 应用 Push 功能</a></p>
</li>
<li><p><a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/APNsProviderAPI.html#//apple_ref/doc/uid/TP40008194-CH101-SW1" target="_blank" rel="external">【APNs Provider API】</a></p>
</li>
<li><p><a href="https://developer.apple.com/account/" target="_blank" rel="external">【Apple Developer 证书配置中心】</a></p>
</li>
<li><p><a href="http://blog.csdn.net/phunxm/article/details/42685597" target="_blank" rel="external">Apple 证书相关概念</a></p>
</li>
<li><p><a href="http://www.cocoachina.com/bbs/read.php?tid=195467" target="_blank" rel="external">Mac 上的消息推送测试工具 PushMeBaby</a></p>
</li>
<li><p><a href="http://io.diveinedu.com/2015/01/24/%E4%BD%BF%E7%94%A8PushMeBaby%E6%B5%8B%E8%AF%95APP%E7%9A%84%E8%BF%9C%E7%A8%8B%E6%8E%A8%E9%80%81%E5%8A%9F%E8%83%BD.html" target="_blank" rel="external">使用 PushMeBaby 测试 APP 的远程推送功能</a></p>
</li>
<li><p><a href="http://www.programgo.com/article/68982800051/;jsessionid=4DE852D70D7623B679B78CBD16EA45CB" target="_blank" rel="external">iOS 消息推送服务器的 Java 实现</a></p>
</li>
<li><p><a href="http://www.programgo.com/article/68982800051/;jsessionid=4DE852D70D7623B679B78CBD16EA45CB" target="_blank" rel="external">iOS 消息推送服务器的 Java 实现 Provider</a></p>
</li>
<li><p><a href="http://blog.handy.wang/blog/2013/12/19/mac-osxia-da-jian-apnstui-song-fu-wu-qi/" target="_blank" rel="external">iOS 消息推送服务器的 PHP 实现</a></p>
</li>
<li><p><a href="http://blog.csdn.net/tonny_guan/article/details/8963262" target="_blank" rel="external">推送通知 iOS 客户端编写实现及推送服务器端编写</a></p>
</li>
<li><p><a href="http://docs.jiguang.cn/jpush/client/iOS/ios_guide_new/" target="_blank" rel="external">JPush iOS SDK 集成指南</a></p>
</li>
</ul>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>iOS Push 流程涉及到四个角色：<code>Device</code>、<code>APP</code>、<code>Provider</code>、<code>APNs</code></p>
<p><strong>Device：</strong>iOS设备，用来接收 APNs 下发下来的消息</p>
<p><strong>Client App：</strong>iOS 设备上的应用程序，用来接收 APNs 下发的消息到指定的一个客户端 app (消息的最终响应者)</p>
<p><strong>Provider：</strong>我们自己搭建的 APP Push服务器</p>
<p><strong>APNs：</strong>苹果的服务器（Apple Push Notification Service）</p>
<h3 id="deviceToken"><a href="#deviceToken" class="headerlink" title="deviceToken"></a>deviceToken</h3><p>deviceToken 唯一标识一个用户。在使用推送功能的时候，需要在开发者中心创建支持Push Notification的证书，并且将证书和私钥用于应用后台服务器与APNs之间通信。</p>
<ul>
<li>在一台设备中，deviceToken 是系统级别的，不同 App 获得的 deviceToken 是相同的。</li>
<li>deviceToken 并不会因为单个 app 的更新而发生改变。</li>
<li>假如我的 iPhone 从 backup 中恢复数据，deviceToken 不会发生变化。</li>
<li>用户抹除 iPhone 的数据时，意味着要与这台手机撇清关系，比如出售或者送人。此时为了保护隐私，deviceToken 会改变。</li>
<li>老老实实的收集最新的 deviceToken，这是最保险的做法。</li>
<li>Development 和 Production 两个版本下的 deviceToken 是不同的，前者是由 <a href="https://developer.apple.com/account/ios/profile/" target="_blank" rel="external">Certificates, Identifiers &amp; Profiles</a> -&gt; Provisioning Profiles -&gt; Development 下的 *.mobileprovision 获取的。后者是由 <a href="https://developer.apple.com/account/ios/profile/" target="_blank" rel="external">Certificates, Identifiers &amp; Profiles</a> -&gt; Provisioning Profiles -&gt; Production 的 *.mobileprovision 获取的。</li>
<li>app 端发送 deviceToken 给“自建 push 服务器”的时机：获取 deviceToken 之后立刻发送。</li>
</ul>
<p>参考<a href="http://www.mednoter.com/device-token.html" target="_blank" rel="external">不同App获得的device token是否相同？</a></p>
<h3 id="deviceToken-的获取方法"><a href="#deviceToken-的获取方法" class="headerlink" title="deviceToken 的获取方法"></a>deviceToken 的获取方法</h3><ul>
<li><p>在 AppDelegate 文件里的 <code>application:didFinishLaunchingWithOptions:</code> 方法里注册 RemoteNotifications</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</div><div class="line">    </div><div class="line">    <span class="comment">// 注册 RemoteNotifications</span></div><div class="line">    [[<span class="built_in">UIApplication</span> sharedApplication] registerForRemoteNotifications];</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> ([application respondsToSelector:<span class="keyword">@selector</span>(registerUserNotificationSettings:)]) &#123;</div><div class="line">        <span class="comment">// iOS 8 and later</span></div><div class="line">        <span class="built_in">UIUserNotificationSettings</span> *settings = [<span class="built_in">UIUserNotificationSettings</span> settingsForTypes:</div><div class="line">                                                <span class="built_in">UIUserNotificationTypeAlert</span> | <span class="built_in">UIUserNotificationTypeBadge</span> |</div><div class="line">                                                <span class="built_in">UIUserNotificationTypeSound</span> categories:<span class="literal">nil</span>];</div><div class="line">        [<span class="built_in">UIApplication</span>.sharedApplication registerUserNotificationSettings:settings];</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="comment">// iOS 7 and earlier</span></div><div class="line">        [<span class="built_in">UIApplication</span>.sharedApplication registerForRemoteNotificationTypes:</div><div class="line">         <span class="built_in">UIRemoteNotificationTypeAlert</span> | <span class="built_in">UIRemoteNotificationTypeBadge</span> |</div><div class="line">         <span class="built_in">UIRemoteNotificationTypeSound</span>];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// app启动后自动清除IconBadgeNumber</span></div><div class="line">    [<span class="built_in">UIApplication</span> sharedApplication].applicationIconBadgeNumber = <span class="number">0</span>;</div><div class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>在回调方法 <code>application:didRegisterForRemoteNotificationsWithDeviceToken:</code> 里获取 deviceToken</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">void</span>)application:(<span class="built_in">UIApplication</span> *)application didRegisterForRemoteNotificationsWithDeviceToken:(<span class="built_in">NSData</span> *)deviceToken &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"deviceToken = %@"</span>, deviceToken);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="操作流程"><a href="#操作流程" class="headerlink" title="操作流程"></a>操作流程</h2><p><img src="/images/2016_09_08_iOSPush-PushSequence1.jpg"></p>
<blockquote>
<p>上图可以分为三个阶段：</p>
<ul>
<li><p>第一阶段：应用程序把要发送的消息、目的iPhone的标识打包，发给APNS。 </p>
</li>
<li><p>第二阶段：APNS在自身的已注册Push服务的iPhone列表中，查找有相应标识的iPhone，并把消息发送到iPhone。 </p>
</li>
<li><p>第三阶段：iPhone把发来的消息传递给相应的应用程序，并且按照设定弹出Push通知。</p>
</li>
</ul>
</blockquote>
<hr>
<p><img src="/images/2016_09_08_iOSPush-PushSequence2.png" width="80%"></p>
<blockquote>
<p>Push 的关键流程：</p>
<ol>
<li><p>创建Push SSL Certification(推送证书)</p>
</li>
<li><p>iOS客户端注册Push功能并获得DeviceToken</p>
</li>
<li><p>使用Provider向APNS发送Push消息</p>
</li>
<li><p>iOS客户端接收处理由APNS发来的消息</p>
</li>
</ol>
</blockquote>
<hr>
<p><img src="/images/2016_09_08_iOSPush-PushSequence3.png" width="60%"></p>
<blockquote>
<p>Push 的工作流程：</p>
<ol>
<li><p>APP向系统注册推送服务。</p>
</li>
<li><p>设备从APNs请求deviceToken。</p>
</li>
<li><p>通过代理方法将deviceToken返回给APP。</p>
</li>
<li><p>APP将deviceToken发送给应用后台服务器（Provider）。</p>
</li>
<li><p>应用后台服务器保存deviceToken，然后在需要推送通知的时候，给APNs发送信息，使用deviceToken标识所要送达的客户端。</p>
</li>
<li><p>APNs将后台服务器发过来的数据推送到设备。</p>
</li>
<li><p>设备将消息分发给应用程序。</p>
</li>
</ol>
</blockquote>
<hr>
<blockquote>
<p>整体流程分为五步：</p>
<ol>
<li><p>Device –&gt; 连接 –&gt; APNs：获取 DeviceToke</p>
</li>
<li><p>Device –&gt; 连接 –&gt; Provider：提供 DeviceToke</p>
</li>
<li><p>Provider 检测需要 push 的消息生成 Notification 信息</p>
</li>
<li><p>Provider 把要 push 的消息推送到 APNs</p>
</li>
<li><p>APNs 把该消息推送到手机</p>
</li>
</ol>
</blockquote>
<h2 id="Payload"><a href="#Payload" class="headerlink" title="Payload"></a>Payload</h2><p>服务器配置好证书并拿到 deviceToken 后就可以向 APNs 发送消息了。苹果官方是这么介绍 Payload 的：<strong>The payload contains the custom data you want to provide, along with information about how the system should alert the user.</strong> 发送消息的格式如下图所示：<br><img src="/images/2016_09_08_iOSPush-Payload.jpg"></p>
<p>Payload 就是 push 的消息负载，这就是应用需要关心的数据。 Payload 是一个 JSON 字典，该字典必须包含一个 key 为 aps 的字典，aps 字典可以包含 alert、badge、sound 三个属性中的一个或多个，alert 为展示给用户的消息，badge 表示应用程序图标显示的数字，sound 表示收到 push 的提示音。基本格式如下：</p>
<pre><code>{
    &quot;aps&quot;: {
      &quot;alert&quot;:&quot;Hello Push!&quot;,
      &quot;badge&quot;:1,
      &quot;sound&quot;:&quot;default&quot;
    }
 }
</code></pre><p>Payload 是有大小限制的，超过这个限制，APNs 将拒绝转发。其限制与所使用的 APNs provider API 有关：</p>
<ul>
<li>HTTP/2-based APNs provider API<br>  Regular push notification: 4KB<br>  Voice over Internet Protocol (VoIP) notification: 5KB</li>
<li>Legacy APNs binary interface<br>  Regular push notification: 2KB）<br>Payload 的具体结构参考 <a href="https://developer.apple.com/library/prerelease/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/TheNotificationPayload.html#//apple_ref/doc/uid/TP40008194-CH107-SW1" target="_blank" rel="external">Apple Push Notification Service</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS/">iOS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Push/">Push</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/09/08/2016_09_08_iOSPush/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/09/08/2016_09_08_iOSPush/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/29/2016_08_29_UINavigationControllerNote/" title="UINavigationController + UINavigationBar + UIWebView 范例" itemprop="url">UINavigationController + UINavigationBar + UIWebView 范例</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2016-08-29T02:24:53.000Z" itemprop="datePublished"> Published 2016-08-29</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="UINavigationBar-UIWebView-范例"><a href="#UINavigationBar-UIWebView-范例" class="headerlink" title="UINavigationBar + UIWebView 范例"></a>UINavigationBar + UIWebView 范例</h2><h3 id="目录结构如下："><a href="#目录结构如下：" class="headerlink" title="目录结构如下："></a>目录结构如下：</h3><!--![UINavigationBarDictionary](/images/2016-08-29-UINavigationControllerNote-UINavigationBarDictionary.png)-->
<p><img src="/images/2016-08-29-UINavigationControllerNote-UINavigationBarDictionary.png" width="30%"></p>
<h3 id="ViewController-m文件"><a href="#ViewController-m文件" class="headerlink" title="ViewController.m文件"></a>ViewController.m文件</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></div><div class="line"></div><div class="line"><span class="meta">#define SCREENWIDTH [UIScreen mainScreen].bounds.size.width</span></div><div class="line"><span class="meta">#define SCREENHEIGHT [UIScreen mainScreen].bounds.size.height</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> () &lt;<span class="title">UIWebViewDelegate</span>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIWebView</span> *webView;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UINavigationBar</span> *navigationBar;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    </div><div class="line">    <span class="comment">// 创建UINavigationBar</span></div><div class="line">    <span class="keyword">self</span>.navigationBar = [[<span class="built_in">UINavigationBar</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">20</span>, SCREENWIDTH, <span class="number">44</span>)];</div><div class="line">    </div><div class="line">    <span class="comment">// 这里直接设置UINavigationBar的backgroundColor是没效果的</span></div><div class="line">    <span class="comment">// self.navigationBar.backgroundColor = [UIColor purpleColor];</span></div><div class="line">    </div><div class="line">    <span class="comment">// 设置UINavigationBar的背景色</span></div><div class="line">    <span class="keyword">self</span>.navigationBar.barTintColor = [<span class="built_in">UIColor</span> whiteColor];</div><div class="line">    </div><div class="line">    <span class="comment">// 设置UINavigationBar的UINavigationItem的颜色</span></div><div class="line">    <span class="keyword">self</span>.navigationBar.tintColor = [<span class="built_in">UIColor</span> blackColor];</div><div class="line"></div><div class="line">    </div><div class="line">    <span class="comment">// 为UINavigationBar添加UINavigationItem，并设置UINavigationItem的UIBarButtonItem</span></div><div class="line">    <span class="built_in">UINavigationItem</span> *navigationItem = [[<span class="built_in">UINavigationItem</span> alloc] initWithTitle:<span class="string">@"美团抢鲜"</span>];</div><div class="line">    <span class="built_in">UIBarButtonItem</span> *leftButton = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithBarButtonSystemItem:<span class="built_in">UIBarButtonSystemItemReply</span> target:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(webViewGoBack)];</div><div class="line">    <span class="built_in">UIBarButtonItem</span> *rightButton = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithBarButtonSystemItem:<span class="built_in">UIBarButtonSystemItemPlay</span> target:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(webViewGoForward)];</div><div class="line">    [navigationItem setLeftBarButtonItem:leftButton];</div><div class="line">    [navigationItem setRightBarButtonItem:rightButton];</div><div class="line">    <span class="comment">// 最后别忘了把设置好的UINavigationItem添加到UINavigationBar上</span></div><div class="line">    [<span class="keyword">self</span>.navigationBar pushNavigationItem:navigationItem animated:<span class="literal">YES</span>];</div><div class="line">    </div><div class="line">    <span class="comment">// 设置UIWebView</span></div><div class="line">    <span class="keyword">self</span>.webView = [[<span class="built_in">UIWebView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, SCREENWIDTH, SCREENHEIGHT)];</div><div class="line">    <span class="keyword">self</span>.webView.delegate = <span class="keyword">self</span>;</div><div class="line">    </div><div class="line">    <span class="comment">// 下面两句是UI测试专用方法</span></div><div class="line">    <span class="comment">// self.webView.layer.borderColor = [[UIColor redColor] CGColor];</span></div><div class="line">    <span class="comment">// self.webView.layer.borderWidth = 1;</span></div><div class="line">    </div><div class="line">    <span class="comment">// 设置UIWebView后面的View的背景色，而不是直接设置到UIWebView上</span></div><div class="line">    <span class="comment">// self.webView.backgroundColor = [UIColor brownColor];</span></div><div class="line">    </div><div class="line">    <span class="comment">// 如若url的scheme是http，还要在Info.plist中设置NSAppTransportSecurity的NSAllowsArbitraryLoads字段</span></div><div class="line">    <span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="string">@"http://liu2er.com/"</span>];</div><div class="line">    <span class="built_in">NSURLRequest</span> *request = [<span class="built_in">NSURLRequest</span> requestWithURL:url];</div><div class="line">    </div><div class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.webView];</div><div class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.navigationBar];</div><div class="line">    </div><div class="line">    [<span class="keyword">self</span>.webView loadRequest:request];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 左上角返回按钮</span></div><div class="line">-(<span class="keyword">void</span>)webViewGoBack &#123;</div><div class="line">    [<span class="keyword">self</span>.webView goBack];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 右上角前进按钮</span></div><div class="line">-(<span class="keyword">void</span>)webViewGoForward &#123;</div><div class="line">    [<span class="keyword">self</span>.webView goForward];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h2 id="UINavigationController-UIWebView-范例"><a href="#UINavigationController-UIWebView-范例" class="headerlink" title="UINavigationController + UIWebView 范例"></a>UINavigationController + UIWebView 范例</h2><h3 id="目录结构如下：-1"><a href="#目录结构如下：-1" class="headerlink" title="目录结构如下："></a>目录结构如下：</h3><!--![UINavigationBarDictionary](/images/2016-08-29-UINavigationControllerNote-UINavigationBarDictionary.png)-->
<p><img src="/images/2016-08-29-UINavigationControllerNote-UINavigationControllerDictionary.png" width="30%"></p>
<h3 id="AppDelegate-m文件"><a href="#AppDelegate-m文件" class="headerlink" title="AppDelegate.m文件"></a>AppDelegate.m文件</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"AppDelegate.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">AppDelegate</span> ()</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UINavigationController</span> *navigationVC;</div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) ViewController *webVC;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">AppDelegate</span></span></div><div class="line"></div><div class="line"></div><div class="line">- (<span class="built_in">BOOL</span>)application:(<span class="built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="built_in">NSDictionary</span> *)launchOptions &#123;</div><div class="line">    <span class="keyword">self</span>.window = [[<span class="built_in">UIWindow</span> alloc] initWithFrame:[<span class="built_in">UIScreen</span> mainScreen].bounds];</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.webVC = [[ViewController alloc] init];</div><div class="line">    <span class="keyword">self</span>.navigationVC = [[<span class="built_in">UINavigationController</span> alloc] initWithRootViewController:<span class="keyword">self</span>.webVC];</div><div class="line">    </div><div class="line">    <span class="comment">// 设置navigationBar是否半透明，YES半透明，NO不半透明</span></div><div class="line">    [<span class="keyword">self</span>.navigationVC.navigationBar setTranslucent:<span class="literal">NO</span>];</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.window.rootViewController = <span class="keyword">self</span>.navigationVC;</div><div class="line">    [<span class="keyword">self</span>.window makeKeyAndVisible];</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h3 id="ViewController-m文件-1"><a href="#ViewController-m文件-1" class="headerlink" title="ViewController.m文件"></a>ViewController.m文件</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></div><div class="line"></div><div class="line"><span class="meta">#define SCREENWIDTH [UIScreen mainScreen].bounds.size.width</span></div><div class="line"><span class="meta">#define SCREENHEIGHT [UIScreen mainScreen].bounds.size.height</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> () &lt;<span class="title">UIWebViewDelegate</span>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIWebView</span> *webView;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidLoad];</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.navigationItem.title=<span class="string">@"TestFlightApp"</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.navigationItem.leftBarButtonItem = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithBarButtonSystemItem:<span class="built_in">UIBarButtonSystemItemReply</span> target:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(webViewGoBack)];</div><div class="line">    <span class="keyword">self</span>.navigationItem.rightBarButtonItem = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithBarButtonSystemItem:<span class="built_in">UIBarButtonSystemItemPlay</span> target:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(webViewGoForward)];</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.webView = [[<span class="built_in">UIWebView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">-64</span>, SCREENWIDTH, SCREENHEIGHT)];</div><div class="line">    </div><div class="line">    <span class="keyword">self</span>.webView.delegate = <span class="keyword">self</span>;</div><div class="line">    </div><div class="line">    <span class="built_in">NSURL</span> *url = [<span class="built_in">NSURL</span> URLWithString:<span class="string">@"http://liu2er.com/"</span>];	    <span class="built_in">NSURLRequest</span> *request = [<span class="built_in">NSURLRequest</span> requestWithURL:url];</div><div class="line">    </div><div class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.webView];</div><div class="line">    [<span class="keyword">self</span>.webView loadRequest:request];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 左上角返回按钮</span></div><div class="line">-(<span class="keyword">void</span>)webViewGoBack &#123;</div><div class="line">    [<span class="keyword">self</span>.webView goBack];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 右上角前进按钮</span></div><div class="line">-(<span class="keyword">void</span>)webViewGoForward &#123;</div><div class="line">    [<span class="keyword">self</span>.webView goForward];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>注：如若需要在UIWebView里用到http的明文链接，则需要设置<code>Info.plist</code>的<code>App Transport Security Settings</code>参数，即：</p>
<ul>
<li>在Info.plist中添加<code>App Transport Security Settings</code>类型Dictionary；</li>
<li>在App Transport Security Settings下添加<code>NSAllowsArbitraryLoads</code>类型Boolean,值设为<code>YES</code>；<br>如下图所示：<br><img src="/images/2016-08-29-UINavigationControllerNote-AppTransportSecuritySettings.png" width="60%"></li>
</ul>
<p>具体操作参考<a href="https://segmentfault.com/a/1190000002933776" target="_blank" rel="external">iOS9 HTTP 不能正常使用的解决办法</a>。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS/">iOS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/UINavigationController/">UINavigationController</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/08/29/2016_08_29_UINavigationControllerNote/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/08/29/2016_08_29_UINavigationControllerNote/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/25/2016_08_25_RACPractice/" title="RAC 工程简单实践" itemprop="url">RAC 工程简单实践</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2016-08-25T03:33:48.000Z" itemprop="datePublished"> Published 2016-08-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="创建一个简单的-RAC-工程"><a href="#创建一个简单的-RAC-工程" class="headerlink" title="创建一个简单的 RAC 工程"></a>创建一个简单的 RAC 工程</h2><ul>
<li>先创建一个 SigleView 或 Command Line Tool 工程 <code>RACTest</code></li>
<li>在 RACTest 工程的根目录执行终端命令：<code>$ vim Podfile</code></li>
<li>在 Podfile 里写入内容：</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">platform <span class="symbol">:ios</span>, <span class="string">'9.0'</span>  <span class="comment">#这条命令不是必须的</span></div><div class="line">pod <span class="string">"ReactiveCocoa"</span>, <span class="string">"2.5"</span>  <span class="comment">#3.0版本不成功，2.5和~&gt;4.0.4-alpha-4都能成功</span></div><div class="line">use_frameworks!  <span class="comment">#这条命令不是必须的</span></div></pre></td></tr></table></figure>
<ul>
<li>在 RACTest 工程的根目录执行终端命令：<code>$ pod install —-no-repo-update</code></li>
<li>在 RACTest 工程里导入头文件 <code>#import &quot;ReactiveCocoa/ReactiveCocoa.h&quot;</code></li>
</ul>
<h2 id="最简单的信号的创建与订阅范例"><a href="#最简单的信号的创建与订阅范例" class="headerlink" title="最简单的信号的创建与订阅范例"></a>最简单的<em>信号的创建与订阅</em>范例</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="meta">#import <span class="meta-string">&lt;Foundation/Foundation.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"ReactiveCocoa/ReactiveCocoa.h"</span></span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</div><div class="line">    <span class="keyword">@autoreleasepool</span> &#123;</div><div class="line">        </div><div class="line">        <span class="comment">// 创建信号</span></div><div class="line">        RACSignal *signal = [RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">            </div><div class="line">            <span class="comment">// 发送信号</span></div><div class="line">            [subscriber sendNext:<span class="string">@"数据1"</span>];</div><div class="line">            [subscriber sendNext:<span class="string">@"数据2"</span>];</div><div class="line">            [subscriber sendError:[<span class="built_in">NSError</span> errorWithDomain:<span class="string">@"SignalError"</span> code:<span class="number">110</span> userInfo:@&#123;<span class="string">@"reason"</span>:<span class="string">@"unknown"</span>&#125;]];</div><div class="line">            [subscriber sendCompleted];</div><div class="line">            </div><div class="line">            <span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line">                <span class="built_in">NSLog</span>(<span class="string">@"信号被销毁"</span>);</div><div class="line">            &#125;];</div><div class="line">        &#125;];</div><div class="line">        </div><div class="line">        <span class="comment">// 订阅信号</span></div><div class="line">        [signal subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"接收到数据：%@"</span>, x);</div><div class="line">        &#125;];</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>输出结果为：</p>
<pre><code>2016-08-24 17:25:57.107 OCTest[15943:240697] 接收到数据：数据1
2016-08-24 17:25:57.108 OCTest[15943:240697] 接收到数据：数据2
2016-08-24 17:25:57.108 OCTest[15943:240697] 信号被销毁
Program ended with exit code: 0
</code></pre><h2 id="CocoaPods使用技巧"><a href="#CocoaPods使用技巧" class="headerlink" title="CocoaPods使用技巧"></a>CocoaPods使用技巧</h2><ul>
<li>在工程根目录下执行<code>$ pod init</code>命令可以初始化一个 Podfile 文件</li>
<li>CocoaPods 使用 Ruby 语言编写而成，OS X 已经集成了 Ruby 环境</li>
<li>查看 Ruby 源<code>$ gem source -l</code></li>
<li>通过添加 verbose 参数来参看 pod install 过程<code>$ pod install —-verbose —-no-repo-update</code></li>
<li><p>可以搜索框架，例如<code>$ pod search ReactiveCocoa</code>，搜索到 ReactiveCocoa 的所有版本如下：</p>
<p>  4.2.1, 4.1.0, 4.0.4-alpha-4, 4.0.4-alpha-1, 4.0.3-alpha-3, 4.0.3-alpha-1, 4.0.2-alpha-3, 4.0.2-alpha-1, 4.0.1, 4.0.1-alpha-3, 4.0.1-alpha-1, 4.0.0, 4.0.0-alpha-3, 4.0.0-alpha-2, 4.0.0-alpha-1, 4.0.0-RC.2, 4.0.0-RC.1, 3.0.0, 3.0.0-swift2, 3.0-beta.9, 3.0-beta.6, 3.0-alpha.3, 3.0.0-alpha.1, 3.0-RC.1, 2.5, 2.4.7, 2.4.6, 2.4.5, 2.4.4, 2.4.2, 2.3.1, 2.3, 2.2.4, 2.2.3, 2.2.2, 2.2, 2.1.8, 2.1.7, 2.1.6, 1.4.0, 1.3.1, 1.0.0, 0.17.1, 0.16.1, 0.13.1, 0.12.0, 0.10.0, 0.9.0, 0.8.0, 0.6.0, 0.5.0, 0.0.1 [master-1 repo]</p>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS/">iOS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/RAC/">RAC</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/08/25/2016_08_25_RACPractice/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/08/25/2016_08_25_RACPractice/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/25/2016_08_25_HexoNote/" title="Hexo + Jacman 笔记" itemprop="url">Hexo + Jacman 笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2016-08-25T02:19:35.000Z" itemprop="datePublished"> Published 2016-08-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="Hexo-Jacman安装流程"><a href="#Hexo-Jacman安装流程" class="headerlink" title="Hexo + Jacman安装流程"></a>Hexo + Jacman安装流程</h2><ul>
<li>去 <a href="https://nodejs.org/en/" target="_blank" rel="external">node.js 官网</a>安装<code>node.js</code></li>
<li>查看版本号<code>$ node -v</code> 和 <code>$ npm -v</code></li>
<li>去 <a href="http://brew.sh/index_zh-cn.html" target="_blank" rel="external">homebrew 官网</a>下载并安装<code>homebrew</code></li>
<li>检查是否已经安装过 hexo <code>$ hexo -v</code></li>
<li>如果没安装过 hexo，运行命令安装 <code>$ sudo npm install -g hexo-cli</code>，参考 <a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">hexo 官网</a></li>
<li>新建博客存放目录<code>&lt;blog_directory&gt;</code></li>
<li><code>$ hexo init &lt;blog_directory&gt;</code></li>
<li>cd 到 <code>&lt;blog_directory&gt;</code> 目录执行<code>$ npm install</code></li>
<li>先后执行<code>$ hexo generate</code>（简写 hexo g）和<code>$ hexo server</code>（简写 hexo s）启动站点，然后在浏览器中输入<code>http://0.0.0.0:4000</code>就可以看到站点了</li>
<li>设置 <code>Github Pages</code>，可以参考<a href="http://my.oschina.net/ryaneLee/blog/638440" target="_blank" rel="external">小白独立搭建博客–Github Pages和Hexo简明教程</a>和<a href="https://xuanwo.org/2015/03/26/hexo-intor/" target="_blank" rel="external">史上最详细的Hexo博客搭建图文教程</a></li>
<li>查看<code>~/.ssh</code>目录中是否已经存在 SSH key 了，如果存在了则直接用，如果没有存在则重新配置<blockquote>
<p><code>$ git config --global user.name “yourname”</code><br><code>$ git config --global user.email “youremail”</code><br>注：本邮箱不一定与 github 的注册邮箱一致，但是应该与 SSH key 的邮箱一致</p>
</blockquote>
</li>
<li>测试 SSH key 是否设置成功<code>$ ssh -T git@github.com</code></li>
<li>如下图所示配置_config.yml文件：<br><img src="/images/2016-08-25-HexoNote-DeployGitSetting.png" width="50%"><!--![DeployGitSetting](/images/2016-08-25-HexoNote-DeployGitSetting.png)--></li>
<li>如果使用 git 方式进行部署，执行<code>$ npm install hexo-deployer-git --save</code>来安装所需的插件</li>
<li>也可以用 https 方式来部署，如下图所示：<br><img src="/images/2016-08-25-HexoNote-DeployHttpsSetting.png" width="50%"><!--![DeployHttpsSetting](/images/2016-08-25-HexoNote-DeployHttpsSetting.png)--></li>
<li>用 https 方式部署时需要输入 github 的注册邮箱和登录密码</li>
<li>最后执行<code>$ hexo g -d</code>来发布</li>
<li>在博客根目录下执行如下命令来安装 jacman 主题<code>$ git clone https://github.com/wuchong/jacman.git themes/Jacman</code></li>
<li>在<code>_config.yml</code>文件中设置 theme 为 Jacman</li>
</ul>
<h2 id="文章发布流程"><a href="#文章发布流程" class="headerlink" title="文章发布流程"></a>文章发布流程</h2><blockquote>
<ol>
<li><code>hexo new &lt;文章名&gt;</code>  // Create a new post &lt;文章名&gt;，缩写<code>hexo n &lt;文章名&gt;</code></li>
<li><code>hexo generate</code>  // Generate static files</li>
<li><code>hexo deploy</code>  // Deploy to remote sites</li>
</ol>
</blockquote>
<ul>
<li>其中<code>hexo generate</code>和<code>hexo deploy</code>可以合成一条命令，即<code>hexo generate -d</code>或<code>hexo deploy -g</code>，简写为<code>hexo g -d</code>或<code>hexo d -g</code>。</li>
<li>在部署之前可以使用<code>hexo server</code>命令来启动服务器在本地预览。</li>
<li>文章的默认生成路径为<code>~/Documents/Hexo文件/source/_posts/&lt;文章名&gt;.md</code>。</li>
<li>hexo常用命令可以参考<a href="https://segmentfault.com/a/1190000002632530" target="_blank" rel="external">hexo常用命令笔记</a>。</li>
</ul>
<h2 id="代码段高亮"><a href="#代码段高亮" class="headerlink" title="代码段高亮"></a>代码段高亮</h2><p>首先，设置<code>~/Documents/Hexo文件/_config.yml</code></p>
<!--![CodeHighlightSetting](/images/2016-08-25-HexoNote-CodeHighlightSetting.png)-->
<p><img src="/images/2016-08-25-HexoNote-CodeHighlightSetting.png" width="20%"></p>
<p>其次，设置文件<code>~/Documents/Hexo文件/themes/Jacman/source/css/_base/highlight/theme.styl</code>，设置前图片如下所示：</p>
<!--![CommentColor](/images/2016-08-25-HexoNote-CommentColor.png)-->
<p><img src="/images/2016-08-25-HexoNote-CommentColor.png" width="40%" height="40%"></p>
<p>例如把代码块默认主题注释字段的颜色修改为<code>#00A86B</code>。</p>
<p>写代码时格式为：</p>
<blockquote>
<p>```objc</p>
<p>代码</p>
<p>```</p>
</blockquote>
<p>其中hexo支持的语言样式颜色可以参考<a href="http://highlightjs.readthedocs.io/en/latest/css-classes-reference.html" target="_blank" rel="external">CSS classes reference</a>，Markdown语法可参考文章<a href="https://coding.net/help/doc/project/markdown.html#section-8" target="_blank" rel="external">Markdown语法介绍</a>，另外可参考文章<a href="http://vin-zhou.github.io/2014/10/23/Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" target="_blank" rel="external">Hexo搭建个人博客</a>。</p>
<h2 id="控制图片大小"><a href="#控制图片大小" class="headerlink" title="控制图片大小"></a>控制图片大小</h2><p>Markdown目前不支持调整图片大小，如果有这样的需求，可以直接用html代码插入，例如：</p>
<pre><code>&lt;img src=&quot;xxx.jpg&quot; width=&quot;50%&quot; height=&quot;50%&quot;&gt;
或
&lt;img src=&quot;xxx.jpg&quot; width=&quot;50%&quot; /&gt;
</code></pre>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Blog/">Blog</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Hexo/">Hexo</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/08/25/2016_08_25_HexoNote/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/08/25/2016_08_25_HexoNote/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/24/2016_08_25_ReactiveCocoaNote/" title="ReactiveCocoa 学习笔记" itemprop="url">ReactiveCocoa 学习笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2016-08-24T10:45:18.000Z" itemprop="datePublished"> Published 2016-08-24</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="RACSignal创建方式"><a href="#RACSignal创建方式" class="headerlink" title="RACSignal创建方式"></a>RACSignal创建方式</h2><h3 id="单元信号"><a href="#单元信号" class="headerlink" title="单元信号"></a>单元信号</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal1 = [RACSignal <span class="keyword">return</span>:<span class="string">@"Some Value"</span>];</div><div class="line">RACSignal *signal2 = [RACSignal error:errorObject];</div><div class="line">RACSignal *signal3 = [RACSignal empty];</div><div class="line">RACSignal *signal4 = [RACSignal never];</div></pre></td></tr></table></figure>
<h3 id="动态信号"><a href="#动态信号" class="headerlink" title="动态信号"></a>动态信号</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal5 = [RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">    [subscriber sendNext:@<span class="number">1</span>];</div><div class="line">    [subscriber sendNext:@<span class="number">2</span>];</div><div class="line">    [subscriber sendError:errorObject];</div><div class="line">    [subscriber sendCompleted];</div><div class="line">    <span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line">    &#125;];</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="Cocoa桥接"><a href="#Cocoa桥接" class="headerlink" title="Cocoa桥接"></a>Cocoa桥接</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal6 = [view rac_signalForSelector:<span class="keyword">@selector</span>(setFrame:)];</div><div class="line">RACSignal *signal7 = [view rac_signalForControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</div><div class="line">RACSignal *signal8 = [view rac_willDeallocSignal];</div><div class="line">RACSignal *signal9 = RACObserve(view, backgroundColor);</div></pre></td></tr></table></figure>
<h3 id="信号变换"><a href="#信号变换" class="headerlink" title="信号变换"></a>信号变换</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal10 = [signal1 map:^<span class="keyword">id</span>(<span class="built_in">NSString</span> *value) &#123;</div><div class="line">    <span class="keyword">return</span> [value substringFromIndex:<span class="number">1</span>];</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h3 id="序列转换"><a href="#序列转换" class="headerlink" title="序列转换"></a>序列转换</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal11 = sequence.signal;</div></pre></td></tr></table></figure>
<h2 id="信号订阅过程举例"><a href="#信号订阅过程举例" class="headerlink" title="信号订阅过程举例"></a>信号订阅过程举例</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">RACSignal *signal = [RACSignal createSignal:^RACDisposable *(<span class="keyword">id</span>&lt;RACSubscriber&gt; subscriber) &#123;</div><div class="line">    [subscriber sendNext:@<span class="number">1</span>];</div><div class="line">    [subscriber sendNext:@<span class="number">2</span>];</div><div class="line">    [subscriber sendCompleted];</div><div class="line">    <span class="keyword">return</span> [RACDisposable disposableWithBlock:^&#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"dispose"</span>);</div><div class="line">    &#125;];</div><div class="line">&#125;];</div><div class="line"></div><div class="line">RACDisposable *disposable = [signal subscribeNext:^(<span class="keyword">id</span> x) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"next value is %@"</span>, x);</div><div class="line">&#125; error:^(<span class="built_in">NSError</span> *error) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"Ops! Get some error: %@"</span>, error);</div><div class="line">&#125; completed:^&#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"It finished success"</span>);</div><div class="line">&#125;];</div><div class="line"></div><div class="line">[disposable dispose];</div></pre></td></tr></table></figure>
<h2 id="RACSignal使用方法"><a href="#RACSignal使用方法" class="headerlink" title="RACSignal使用方法"></a>RACSignal使用方法</h2><h3 id="RACTuple-——-元组"><a href="#RACTuple-——-元组" class="headerlink" title="RACTuple —— 元组"></a>RACTuple —— 元组</h3><ul>
<li>RAC定义的一种数据类型</li>
<li>NSArray的简化版</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">RACTuple *tuple = RACTuplePack(@<span class="number">1</span>, <span class="string">@"haha"</span>);</div><div class="line"><span class="keyword">id</span> first = tuple.first;</div><div class="line"><span class="keyword">id</span> second = tuple.second;</div><div class="line"><span class="keyword">id</span> last = tuple.last;</div><div class="line"><span class="keyword">id</span> index1 = tuple[<span class="number">1</span>];</div><div class="line">RACTupleUnpack(<span class="built_in">NSNumber</span> *num, <span class="built_in">NSString</span> *str) = tuple;</div></pre></td></tr></table></figure>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS/">iOS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/RAC/">RAC</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/08/24/2016_08_25_ReactiveCocoaNote/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/08/24/2016_08_25_ReactiveCocoaNote/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/20/2015_08_20_DelegateForDatapass/" title="用委托在视图间传递消息的经典范例" itemprop="url">用委托在视图间传递消息的经典范例</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2016-08-20T06:50:28.000Z" itemprop="datePublished"> Published 2016-08-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>iOS中视图间数据传递的方式常有的有如下几种：</p>
<ol>
<li>采用代理模式</li>
<li>采用iOS消息机制</li>
<li>使用文件，NSUserdefault或者数据库来传递</li>
<li>通过AppDelegate定义全局变量（或者使用UIApplication、定义一个单例类等）</li>
<li>通过控制器属性传递</li>
</ol>
<p>今天我们主要采用第一种方式进行数据传递，这在iOS开发中也是最常见的一种多视图传参方式。使用代理方式传递参数的步骤如下：</p>
<ol>
<li>定义协议，协议中定义好传参时所需要的方法</li>
<li>目标视图控制器定义一个代理对象</li>
<li>源视图控制器实现协议，并在初始化目标控制器时指定目标控制器的代理为其自身</li>
<li>需要传参的时候在目标窗口调用代理的协议方法</li>
</ol>
<p>本例的操作如下所示：<br>一个界面为主视图，点击绿色的Button会Modal出第二个视图，在第二个视图的文本框里输入数据，并点击绿色的Button，会返回到主视图，并且把在第二个视图中输入的数据显示到主视图的文本框里，从而实现了参数跨视图传递；</p>
<p><img src="/images/2015_08_20_DelegateForDatapass1.png" width="32%">  <img src="/images/2015_08_20_DelegateForDatapass2.png" width="32%">  <img src="/images/2015_08_20_DelegateForDatapass3.png" width="32%"><br><!--![图片1](/images/2015_08_20_DelegateForDatapass1.png)
![图片2](/images/2015_08_20_DelegateForDatapass2.png =240x426)
![图片3](/images/2015_08_20_DelegateForDatapass3.png =240x426)--></p>
<p>整个程序的文件组织形式如下图所示：<br><img src="/images/2015_08_20_DelegateForDatapass4.png" width="33%"><br><!--![图片4](/images/2015_08_20_DelegateForDatapass4.png =260x374)--></p>
<h2 id="定义协议，协议中定义好传参时所需要的方法"><a href="#定义协议，协议中定义好传参时所需要的方法" class="headerlink" title="定义协议，协议中定义好传参时所需要的方法"></a>定义协议，协议中定义好传参时所需要的方法</h2><p>其中定义协议的文件为：<code>UIViewPassValueDelegate.h</code>。</p>
<p><strong>UIViewPassValueDelegate.h</strong>的源代码为：<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">UIViewPassValueDelegate</span></span></div><div class="line"></div><div class="line"><span class="comment">// 本方法为传参时所需要的方法</span></div><div class="line">- (<span class="keyword">void</span>)passValue:(<span class="built_in">NSString</span> *)value;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h2 id="源视图控制器实现协议，并在初始化目标控制器时指定目标控制器的代理为其自身"><a href="#源视图控制器实现协议，并在初始化目标控制器时指定目标控制器的代理为其自身" class="headerlink" title="源视图控制器实现协议，并在初始化目标控制器时指定目标控制器的代理为其自身"></a>源视图控制器实现协议，并在初始化目标控制器时指定目标控制器的代理为其自身</h2><p>源视图控制器就是这里的“主视图控制器”，在主视图控制器的实现文件中实现了该协议方法。其中主视图的相关文件为：<code>JJMainViewController.h</code>、<code>JJMainViewController.m</code>和<code>Main.storyboard</code>。</p>
<p>源代码分别为：</p>
<p><strong>JJMainViewController.h</strong><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></div><div class="line"></div><div class="line"><span class="comment">// 导入协议文件的头文件</span></div><div class="line"><span class="meta">#import <span class="meta-string">"UIViewPassValueDelegate.h"</span></span></div><div class="line"></div><div class="line"><span class="comment">// 遵守协议</span></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">JJMainViewController</span> : <span class="title">UIViewController</span> &lt;<span class="title">UIViewPassValueDelegate</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// 本属性为主界面上用来接收另一个视图传递过来的数据</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">weak</span>, <span class="keyword">nonatomic</span>) <span class="keyword">IBOutlet</span> <span class="built_in">UITextField</span> *valueField;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p><strong>JJMainViewController.m</strong><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"JJMainViewController.h"</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"JJAnotherViewController.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">JJMainViewController</span> </span></div><div class="line"></div><div class="line"><span class="comment">// 主视图遵守了委托协议，并实现了委托方法，本方法把另一个视图里的数据传递过来</span></div><div class="line">-(<span class="keyword">void</span>)passValue:(<span class="built_in">NSString</span> *)value &#123;</div><div class="line">    <span class="keyword">self</span>.valueField.text = value;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">IBAction</span>)clickButton:(<span class="keyword">id</span>)sender &#123;</div><div class="line">    </div><div class="line">    JJAnotherViewController *antherVC = [[JJAnotherViewController alloc] init];</div><div class="line">    </div><div class="line">    <span class="comment">// 把主视图设为另一个视图的委托对象</span></div><div class="line">    antherVC.delegate = <span class="keyword">self</span>;</div><div class="line">    </div><div class="line">    <span class="comment">// 点击了主视图的Button后Modal到另一个视图</span></div><div class="line">    [<span class="keyword">self</span> presentViewController:antherVC animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<h2 id="目标视图控制器定义一个代理对象"><a href="#目标视图控制器定义一个代理对象" class="headerlink" title="目标视图控制器定义一个代理对象"></a>目标视图控制器定义一个代理对象</h2><p>这里的目标视图就是本例子中的“另一个视图”。另一个视图的文件为：<code>JJAnotherViewController.h</code>、<code>JJAnotherViewController.m</code>和<code>JJAnotherViewController.xib</code>。</p>
<p>源代码分别为：</p>
<p><strong>JJAnotherViewController.h</strong><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></div><div class="line"><span class="meta">#import <span class="meta-string">"UIViewPassValueDelegate.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">JJAnotherViewController</span> : <span class="title">UIViewController</span></span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">weak</span>, <span class="keyword">nonatomic</span>) <span class="keyword">IBOutlet</span> <span class="built_in">UITextField</span> *value;</div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="keyword">id</span> &lt;<span class="built_in">UIViewPassValueDelegate</span>&gt; delegate;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p><strong>JJAnotherViewController.m</strong><br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"JJAnotherViewController.h"</span></span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">JJAnotherViewController</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">IBAction</span>)backButton:(<span class="keyword">id</span>)sender &#123;</div><div class="line">    </div><div class="line">    <span class="comment">// 需要传参的时候在目标窗口调用代理的协议方法</span></div><div class="line">    [<span class="keyword">self</span>.delegate passValue:<span class="keyword">self</span>.value.text];</div><div class="line">    </div><div class="line">    [<span class="keyword">self</span> dismissViewControllerAnimated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p>综上，我们来重新将上述过程总结成大白话。为了能把目标视图里的数据通过委托协议传递给主视图，其过程如下：</p>
<ol>
<li>定义协议，协议中声明了一个方法，该方法用于把目标视图里的数据传递给源视图；</li>
<li>分别创建源视图和目标视图的控制器，并搭建好各自的界面；</li>
<li>在目标视图控制器的头文件里导入协议头文件，并定义一个用来存储待传递的数据的属性，和一个代理属性；</li>
<li>在目标视图控制器的实现文件里调用其代理属性的协议方法，并把待传的数据作为参数传入该方法；</li>
<li>让源视图控制器成为目标视图控制器的代理对象，从而源视图就可以接收来自目标视图的数据了，方法是：<ol>
<li>在源视图控制器的头文件里导入协议文件的头文件；</li>
<li>在源视图控制器的头文件里遵守协议，即用尖括号声明；</li>
<li>实现协议方法，在协议方法里接收来自目标视图的数据。参数由该协议方法的参数传递过来；</li>
</ol>
</li>
</ol>
<p>注：</p>
<ul>
<li><p>协议：本例中的<em>UIViewPassValueDelegate.h</em></p>
</li>
<li><p>协议方法：本例中的<em>- (void)passValue:(NSString \</em>)value*</p>
</li>
<li><p>源视图：本例中的<em>JJMainViewController</em></p>
</li>
<li><p>目标视图：本例中的<em>JJAnotherViewController</em></p>
</li>
<li><p>待传递的数据：本例中的目标视图里的文本框里输入的数据</p>
</li>
<li><p>为了防止循环引用代理属性的标识符应为assign，为了让各种对象都能成为本对象的代理对象其类型应为id</p>
</li>
</ul>
<h3 id="进一步抽取"><a href="#进一步抽取" class="headerlink" title="进一步抽取"></a>进一步抽取</h3><p><strong>关键步骤一：</strong>定义协议，协议中定义好可以用来传参的方法，本协议也可以直接定义到主视图控制器的.h文件里<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">UIViewPassValueDelegate</span></span></div><div class="line"></div><div class="line"><span class="comment">// 本方法为传参时所需要的方法</span></div><div class="line">- (<span class="keyword">void</span>)passValue:(<span class="built_in">NSString</span> *)value;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure></p>
<p><strong>关键步骤二：</strong>在主视图控制器的.m文件中把本控制器的对象设为代理对象<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">JJAnotherViewController *antherVC = [[JJAnotherViewController alloc] init];</div><div class="line"></div><div class="line">antherVC.delegate = <span class="keyword">self</span>;</div></pre></td></tr></table></figure></p>
<p><strong>关键步骤三：</strong>同时，在主视图控制器的.m文件中实现协议方法<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">void</span>)passValue:(<span class="built_in">NSString</span> *)value &#123;</div><div class="line">    <span class="keyword">self</span>.valueField.text = value;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>关键步骤四：</strong>在另一个视图控制器的.h文件中引入协议，并定义代理属性<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#import <span class="meta-string">"UIViewPassValueDelegate.h"</span></span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="keyword">id</span> &lt;<span class="built_in">UIViewPassValueDelegate</span>&gt; delegate;</div><div class="line"></div><div class="line">若代理协议是在“主视图控制器”的.h文件中定义的，则本步骤的代码如下方式：</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">UIViewPassValueDelegate</span>;</span></div><div class="line"></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) <span class="keyword">id</span>&lt;KCMainDelegate&gt; delegate;</div></pre></td></tr></table></figure></p>
<p><strong>关键步骤五：</strong>最后，在另一个视图控制器的.m文件中调用代理属性的协议方法传递参数</p>
<pre><code class="objc">[<span class="keyword">self</span>.delegate passValue:<span class="keyword">self</span>.value.text];
</code></pre>
<h2 id="参考网址"><a href="#参考网址" class="headerlink" title="参考网址"></a>参考网址</h2><ol>
<li><p><a href="http://www.cnblogs.com/kenshincui/p/3940746.html#autoid-4-0-0" target="_blank" rel="external">iOS开发系列–视图切换</a></p>
</li>
<li><p><a href="http://www.cnblogs.com/heri/archive/2013/03/18/2965815.html" target="_blank" rel="external">ios页面间传递参数四种方式</a>    </p>
</li>
</ol>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS/">iOS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Delegate/">Delegate</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/08/20/2015_08_20_DelegateForDatapass/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/08/20/2015_08_20_DelegateForDatapass/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/07/12/2016_07_12_GitNote/" title="Git 学习笔记" itemprop="url">Git 学习笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2016-07-11T16:00:00.000Z" itemprop="datePublished"> Published 2016-07-12</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="一张图读懂-Git"><a href="#一张图读懂-Git" class="headerlink" title="一张图读懂 Git"></a>一张图读懂 Git</h2><p><strong><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/0013745374151782eb658c5a5ca454eaa451661275886c6000" target="_blank" rel="external">工作区和暂存区的概念 – 廖雪峰</a></strong></p>
<p><img src="/images/2016071201_git_learn_note_00.png" alt="2016071201_git_learn_note_00"></p>
<h2 id="Git-常用命令"><a href="#Git-常用命令" class="headerlink" title="Git 常用命令"></a>Git 常用命令</h2><p><strong><a href="http://www.ruanyifeng.com/blog/2014/06/git_remote.html" target="_blank" rel="external">Git远程操作详解 – 阮一峰</a></strong></p>
<ul>
<li><code>git clone &lt;git地址&gt;</code>：本地没有repository时，将远程repository整个下载过来。</li>
<li><code>git pull</code>：本地有repository，将远程repository里新的commit数据(如有的话)下载过来，并且与本地代码merge。</li>
<li><code>git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;</code>：用于将本地分支的更新，推送到远程主机。如果省略远程分支名，则表示将本地分支推送与之存在”追踪关系”的远程分支（通常两者同名），如果该远程分支不存在，则会被新建。eg：<code>git push origin master</code></li>
<li><code>git fetch</code>：将远程仓库的更新同步到本地</li>
<li><p><code>git pull</code>：取回远程仓库某个分支的更新，再与本地的指定分支合并</p>
</li>
<li><p>查看分支：<code>git branch</code></p>
</li>
<li>创建分支：<code>git branch &lt;name&gt;</code></li>
<li>切换分支：<code>git checkout &lt;name&gt;</code></li>
<li>创建+切换分支：<code>git checkout -b &lt;name&gt;</code></li>
<li>合并某分支到当前分支：<code>git merge &lt;name&gt;</code></li>
<li><p>删除分支：<code>git branch -d &lt;name&gt;</code></p>
</li>
<li><p>创建一个与本地分支同名的远程分支：</p>
<p>  $ git push origin &lt;本地分支名&gt; </p>
</li>
</ul>
<p><strong><a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="external">常用 Git 命令清单 – 阮一峰</a></strong></p>
<h2 id="分支的创建、合并、删除图示"><a href="#分支的创建、合并、删除图示" class="headerlink" title="分支的创建、合并、删除图示"></a>分支的创建、合并、删除图示</h2><p><strong><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840038939c291467cc7c747b1810aab2fb8863508000" target="_blank" rel="external">分支的创建、合并、删除图示 – 廖雪峰</a></strong></p>
<p>假设原来只有 master 分支 ↓ ：<br><img src="/images/2016071201_git_learn_note_01.png" alt="2016071201_git_learn_note_01"></p>
<p>创建一个叫 dev 的新分支，并切换到该分支上 ↓ ：<code>git checkout -b dev</code><br><img src="/images/2016071201_git_learn_note_02.png" alt="2016071201_git_learn_note_02"></p>
<p>在 dev 分支上进行一次提交 ↓ ：<code>git commit -m &quot;在dev分支上提交更改&quot;</code><br><img src="/images/2016071201_git_learn_note_03.png" alt="2016071201_git_learn_note_03"></p>
<p>把 dev 合并到 master 上 ↓ ：<code>git merge dev</code><br><img src="/images/2016071201_git_learn_note_04.png" alt="2016071201_git_learn_note_04"></p>
<p>删除 dev 分支 ↓ ：<code>git branch -d dev</code><br><img src="/images/2016071201_git_learn_note_05.png" alt="2016071201_git_learn_note_05"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul>
<li><strong><code>master：</code></strong>主分支；</li>
<li><strong><code>HEAD：</code></strong>始终指向当前分支；</li>
<li>Git 创建、合并、删除分支非常快，因为这些操作都是对指针的操作，改改 HEAD 的指向，工作区的文件都没有任何变化；</li>
<li>Git 鼓励你使用分支完成某个任务，合并后再删掉分支，这和直接在 master 分支上工作效果是一样的，但过程更安全。</li>
</ul>
<h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><ul>
<li><strong>fork 按钮：</strong>fork 用于将他人的仓库复制到我们账号中。如果我们想要参与开源项目，首先要 fork 下别人的项目，然后在我们复制过来的仓库中，对别人的代码做修改。</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Git/">Git</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Git/">Git</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2016/07/12/2016_07_12_GitNote/#comments" class="ds-thread-count comments-count-link" data-thread-key="2016/07/12/2016_07_12_GitNote/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2015/08/22/2015_08_22_OCFragmentary/" title="OC：零碎知识总结" itemprop="url">OC：零碎知识总结</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Liu2er" target="_blank" itemprop="author">Liu2er</a>
		
  <p class="article-time">
    <time datetime="2015-08-22T13:55:07.000Z" itemprop="datePublished"> Published 2015-08-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="判断编译环境：ARC还是MRC？"><a href="#判断编译环境：ARC还是MRC？" class="headerlink" title="判断编译环境：ARC还是MRC？"></a>判断编译环境：ARC还是MRC？</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#if __has_feature(objc_arc)</span></div><div class="line"><span class="comment">// 当前编译环境是ARC</span></div><div class="line"></div><div class="line"><span class="meta">#else</span></div><div class="line"><span class="comment">// 当前编译环境是MRC</span></div><div class="line"></div><div class="line"><span class="meta">#endif</span></div></pre></td></tr></table></figure>
<h2 id="UIView、UIWindow、CALayer"><a href="#UIView、UIWindow、CALayer" class="headerlink" title="UIView、UIWindow、CALayer"></a>UIView、UIWindow、CALayer</h2><ol>
<li>UIView：<ul>
<li>属于<code>UIKit.framework</code>框架；</li>
<li>负责显示内容；</li>
<li>可以响应触摸事件；</li>
</ul>
</li>
<li>UIWindow：<ul>
<li>属于<code>UIKit.framework</code>框架；</li>
<li>UIWindow是一种特殊的UIView，通常一个程序中只有一个UIWindow，但是可以手动创建多个UIWindow，并同时加到程序里面；</li>
<li>UIWindow主要有三个作用：<ul>
<li>作为容器，包含APP中所要显示的所有视图；</li>
<li>传递触摸消息到程序中的View和其他对象；</li>
<li>与UIViewController协同工作，方便完成设备方向旋转的支持；</li>
</ul>
</li>
</ul>
</li>
<li>CALayer：<ul>
<li>属于<code>QuartzCore.framework</code>框架；</li>
<li>负责绘制内容；</li>
<li>不能响应触摸事件；</li>
</ul>
</li>
</ol>
<h2 id="设置状态栏隐藏"><a href="#设置状态栏隐藏" class="headerlink" title="设置状态栏隐藏"></a>设置状态栏隐藏</h2><p>在程序的启动过程中隐藏状态栏，在info.plist文件中添加如下内容即可：</p>
<p><img src="/images/2015_08_22_OCFragmentary1.png" alt="图片"></p>
<p>在APP指定的控制器的视图上隐藏状态栏，在控制器添加如下方法即可：<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(<span class="built_in">BOOL</span>)prefersStatusBarHidden &#123;</div><div class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="App-Icons苹果官方指南"><a href="#App-Icons苹果官方指南" class="headerlink" title="App Icons苹果官方指南"></a>App Icons苹果官方指南</h2><p><a href="https://developer.apple.com/library/ios/qa/qa1686/_index.html" target="_blank" rel="external">App Icons 苹果官方指南</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOS/">iOS</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Fragmentary/">Fragmentary</a>
  </div>

</div>




<div class="comments-count">
	
	  	<span></span>
		<a href="/2015/08/22/2015_08_22_OCFragmentary/#comments" class="ds-thread-count comments-count-link" data-thread-key="2015/08/22/2015_08_22_OCFragmentary/" data-count-type="comments">&nbsp;</a>
	
</div>

</footer>


    </article>







  <nav id="page-nav" class="clearfix">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next<span></span></a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/Blog/" title="Blog">Blog<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/C/" title="C">C<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Git/" title="Git">Git<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Objective-C/" title="Objective-C">Objective-C<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>13</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/RAC/" title="RAC">RAC<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/NSOperation/" title="NSOperation">NSOperation<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Octopress/" title="Octopress">Octopress<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C">C<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/GCD/" title="GCD">GCD<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Multithreading/" title="Multithreading">Multithreading<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Fragmentary/" title="Fragmentary">Fragmentary<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Delegate/" title="Delegate">Delegate<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/isEqual/" title="isEqual">isEqual<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Git/" title="Git">Git<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/NSString/" title="NSString">NSString<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/UINavigationController/" title="UINavigationController">UINavigationController<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Push/" title="Push">Push<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/UIButton/" title="UIButton">UIButton<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/NSUserDefaults/" title="NSUserDefaults">NSUserDefaults<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Blosks/" title="Blosks">Blosks<sup>1</sup></a></li>
			
		
		</ul>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2016 
		
		<a href="/about" target="_blank" title="Liu2er">Liu2er</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
